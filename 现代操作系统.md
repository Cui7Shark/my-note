# 2. 进程和线程



- 使单线程代码多线程化 ， 方案： 

1. 1. 全面禁止全局变量，每个线程都有自己的全局变量的私有副本，这些变量对一个线程中的所有过程都可见。
   2. 可以引入新的库过程，方便创建设置和读取这些线程范围的全局变量。



## 2.3 进程间通信



-  竞争条件
  两个或多个进程读写某些共享数据，而最后的结果取决于进程运行的精准时许。 
-  临界区
  互斥：以某种手段确保当一个进程在使用一个共享变量或文件时，其他进程不能做同样的操作。
  避免竞争条件：在一个进程的一部分时间内做内部计算或其他不会引发竞争条件的操作。一个进程在运行时，别的进程不来干扰。 
- ![img](https://cdn.nlark.com/yuque/0/2023/png/25757674/1679569750534-32a3c578-9ed0-47aa-a3d8-df296354603b.png)
-  忙等待的互斥
  讨论几种实现互斥的方案 

- -  屏蔽中断（不太好）	

![img](https://cdn.nlark.com/yuque/0/2023/png/25757674/1679569767898-64eee541-2520-42ff-bdd1-a20a181e18d0.png)

- -  锁变量（有疏漏） 
  -  严格轮换法
    用于忙等待的锁，称为自旋锁 
  -  Peterson解法 
  -  TSL指令 
  - 